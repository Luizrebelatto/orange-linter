
import { lintFile } from "./linter.js";

const file = process.argv[2];
if (!file) {
  console.error("Uso: node index.js <arquivo>");
  process.exit(1);
}

const results = lintFile(file);
console.log(`\x1b[38;5;208m
 ____  ____  ____  _      _____ _____   _     _  _      _____ _____ ____ 
/  _ \\/  __\\/  _ \\/ \\  /|/  __//  __/  / \\   / \\/ \\  /|/__ __Y  __//  __\\
| / \\||  \\/|| / \\|| |\\ ||| |  _|  \\    | |   | || |\\ ||  / \\ |  \\  |  \\/|
| \\_/||    /| |-||| | \\||| |_//|  /_   | |_/\\| || | \\||  | | |  /_ |    /
\\____/\\_/\\_\\\\_/ \\|\\_/  \\|\\____\\\\____\\  \\____/\\_/\\_/  \\|  \\_/ \\____\\\\_/\\_\\
                                                                         
\x1b[0m`);

console.log(`\x1b[38;5;208m
:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::--=--::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::=#*#-:::::::::::::::::::::::::::::
:::::::::::::::::::::::::::::::::::::::::::---=******+=--::::-#**#-:::::::::::::::::::::::::::::
:::::::::::::::::::::::::::::::::::::::---*%#*+=======+*#%#==#*#*-::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::-=%#==============+*%###%--:::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::-*%+=====-===========*%###%%=-::::::::::::::::::::::::::::::
:::::::::::::::::::::::::::::::::::*%+==========================*%+:::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::--##==============================#%--::::::::::::::::::::::::::
:::::::::::::::::::::::::::::::--*%====-==========================+*%=---:::::::::::::::::::::::
::::::::::::::::::::::::::::::::=%================================+++%=--:::::::::::::::::::::::
:::::::::::::::::::::::::::::::-##=================================++*%--:::::::::::::::::::::::
::::::::::::::::::::::=%%+=----=%#==================================++#+::::::::::::::::::::::::
::::::::::::::::::::-+%+*-+*%%%%%#+=================================++*@-:::::::::::::::::::::::
::::::::::::::::::::-%=*--#==-----=#@%%+============================++*%-:::::::::::::::::::::::
:::::::::::::::::::-#*=*-+*=-------=+*+%**=-==+#%%*=================++*%-:::::::::::::::::::::::
:::::::::::::::::::-%*+=-#==---==++=-+*-#-**-----==*#=+++%*========+++*@-:::::::::::::::::::::::
:::::::::::::::::::-%*++-%====*+=---=*--#---*#=----*+--=+#*========+++%+-:::::::::::::::::::::::
:::::::::::::::::::-%*++-%++*=------%=--+=---=%#===#---#+%========+++#%--:::::::::::::::::::::::
::::::::::::::::::::##==-##==------*=---++-----+%#++--++#========+++*%=--:::::::::::::::::::::::
::::::::::::::::::::-%=+--#==-----+*----=%-----==*#--=+%#======++++#%=---:::::::::::::::::::::::
::::::::::::::::::::-*%=+-+#=---=+%-----=%=---==#+--=+*%++++++++++%%--::::::::::::::::::::::::::
:::::::::::::::::::::-%*==--#====%=-----=%+===##----+*#++++++++*%%=-::::::::::::::::::::::::::::
::::::::::::::::::::::-##==---*#%+=======%##*=----*=+#+++++##%%#--::::::::::::::::::::::::::::::
:::::::::::::::::::::::-*%+==----=*******=-----=+++#%%%%%%%#*--:::::::::::::::::::::::::::::::::
::::::::::::::::::::::::--*%#+===---------=+=+++*#+=+++==-------::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::--=#%%%#*+++++++*%%#*=----------------::::::::::::::::::::::::::::::::
:::::::::::::::::::::::::::::--::---------------------:-:------:::::::::::::::::::::::::::::::::
\x1b[0m`);

if (results.length === 0) {
  console.log('\x1b[32m%s\x1b[0m', '✅ All tests passed ✅');

} else {
  results.forEach(issue => {
    console.log(`${issue.file}`);
    console.log(`\x1b[38;5;208m Line ${issue.line}:\x1b[0m ❌ ${issue.message}`);
  });
}
